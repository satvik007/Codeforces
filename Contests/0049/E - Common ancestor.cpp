/*
9999G99X999999999999999X9X999X9X9X9X9X9X999X9X9X99999999G9GX99G9GG9S9M9SS9SHG9G9GGGG999999G99X9X9999999X99999X99999X999X9X999X9X99999999999X999X999X99
9XX9X9XXX9XXSXSXSSSXSXSXSXSXSSHSHXSXSXXXSXSXSXX9SXX99X522sssrsrrrsr:isirrrrH9SX9XHsss25S2X59SX99999XXXX9XXX9X9S9SXSXSXSSSXSXS9XXSXSXSXX9SXXXSXSXSXSXSS
9X99999X999X9X9S9X9X9X9X9X9X9X9X9XXSXX9XXX999X9X9SXXXssiiii:i::::,: ,,,,,,:irisrri::i;riss2SXSSSXSGGGG9X9X9X9X9X99999X9X9X9X9X9999999X9X9X9X999X9X9X9S
9X99X999X999X9X9X9X9X9X9X9X9X9SXXXX9X9X9X99GX222sriii::::i:ii;irrri:,,,,,,,,,,,,,:,:::,:::iirri;i;rs299G99999XH9S999S9X9X9X9XXSXX9X999X9X9X9X9X99999XX
9S9X999X9X9XXS9X9XXX9XXX9X9X9S9X9X9XXX9X9XXXHsr:::::,,,:::::irrssssr:,:,::,,:,:::::::::::::,:,:,:,,,:isHX9G9XS9X9SXX9XXX9XXSXX9X9X9X9X9X999X9999999X9S
XX9999X999X9X9X9X9S9X9X9X9SXXXX9X9SXX9X999SSsr:::i:::,,,,,,::;rss2si::,::i:::::::iiii::iii:i:i::::::,,,::;rss5SHXXX9XHX9X9X9X999X9X9X999X9X999X9X9X9XX
9X9X9X9X9X999X9X9XXX9X9X9X9SXX9X9X9X9X99X9Xr:::ir:, ,,,,,,,:iirsssr:iii:::i:::i:iiiii:i:iiriiii:i::::,,,, ,,:::issSSHSG99X9999999X9999999999999X999X9X
99X9X999X9X9X9X9999999X9X9X9X9X9X9S9XX99X9s::i;ri:,,,,,,::rssssririiiiiiiiiiiiiiiii;iiii;;iriii;iiii::::,,,:ii::::irsX999999XX99X9X99999X999999999X9X9
9X999X9X9X9X9X9X99999X9SXX9S9X9X9X9X9XX99s,:rrsrrri::::;ss252ss;iiiiriiiiiiirrrrrir;rirrr;ii;iiiiiii::i:::iissrri::,:is2SH9X9X9X9X9X999X9X99999999999X
9X99X99999X9X999X999X9X9XX99S9XXX9X9X9X9s::rrsssssrrrsssssrssrirrr;r;;iiiiirrrrrrri;:iirrriirrir;riiii:::::irssrrr;i::,:is2999X9X9X99999X9999999X99999
9X9999999X99999XXX99999X9X999X9X9X9X99G9s:irss22sssss25siirrrrrir;ri;iii;rrrr;;;rii::iiriiiiiirrri;i;ii:::::rssssrri;i:,,:sSG99X9X9X9X9X999999999X9999
9XX9X99999XXX9X9S9X999X9X9X9SXS9S9XX9GSs:irsrssSHSH5ssrrrsssrrrrrr;;ii;rrri;iii;ii::ii:;rriiirii;r;;i;iiii:::;ssr;iiiiii:,,r9G99X9X999X9999999X9999999
9S999X9X9X9X9X9X999X9X9X9X9X9SXSXX9XGXr:irsssssssrrs25S22ssrrrrrrrrrrrr;ririiiri:ii:i:iirii:;iirrrrrr;ririi:iirii::ii:ii;:,:2S99999X9X9X9X9999999X9999
XXX9X9999999X9X9X9X9X9X9X999XXXXX9X99s:irsssssssr;r2522srr;rirrrirrr;rrrrri;irir:iiriir;ii:::ii;i;rrrrrr;iiiiiir;i:::::iii:,:s255XX9999999999G9G9G9G99
9S9999G9G9999X9X9X9X9X9X999X9X999X999i:irrsssssr;r22ssrrri;irrrrriii;irrr;rrr;ri;iriiiri::iii:iii:iirrrrrrr;;iiirrr;::iii;i,isHS9X9X9X999999G9G99999G9
9X99999G99X999X9XXXXX9X999X9X999999Gsi:rrrsss22ssssri;irir;rrririi:r;ririiirirrrirriiriiiriri;iiii;rrrssrrrrrriiirssrrirrri:rSS9XXX9X99G9G99999G9G9GGG
9S9999999X9X9X9X9S9X9X9XXXXX999X99G92iirrrss2sssrrri;iiirir;;iiiiirirrr;;irirrrrrri;riiir;i:iirir;r;rrrrsssrrri:i:;rssssssr:sSXX99G9GGGGMGMGGGGGMGMMMG
XX99999G99999999X9X9S9X9X9X99999X99GXrirssssrii::iiiirrrrrrrirrrirrrrrisrr;i;rrrrrrsriirr;ir;rriiiiiiiirrrrsrrrrr;iis222ssriH@M@B@B@B@@@B@B@B@MMMGGG9X
9S999999G99X9X999X9X9X9X9XXXXX999X99Sirsssr::,::i;rirrrrrrri;rrrrrrirrrirrrr;irrrrrr;;rrrrrrrri;rriii:ii;rrrrrrii:i;s2S22srrMB@B@B@B@B@B@B@BBMMGG999XH
999999999999X999X9XXSXSXSXS9X9X9S99G9srr;i:::::i:iiiirriiiirirrri;rrrsrrrsrssrrrrrrrrsssrrrrrirr;rrrrriiirrrrrrr;;irrs22ssr9B@B@B@B@BBMBMBBBMBMMGG99XX
999999G9G9999X9X9X9SXX9X9X9SXX9X9X9X2::::::i;i::::riiirrrrrrrirrrrrrrrrrrrrrsrsrsssrsssrrrsrrrrrrrrrri;i;iiirrrir;r;;isssrrX@BBB@BBMBBBMBMBB@BBMMGG99S
999G999G9999X9X9S9X9SXSXSXSXX9XXX9X9Hi,:,::i:::::ii;iririri;irrsrrrrrrrsrrrssrssrrrrrsrrssrsrrrri;rrrrrrrri;;rrriiiiiirsr;sMBBM@B@MBMBMBMBMBB@BBMMGG99
9X9X9X99999X9XXSXS9XXXXSXX9999GGGGGBBi,,::::::::::iii:i;r:iirrrrsrrrsrsrsssssrrrssrrrrsssrrssrrrrrrrrirrrii:::ii;ii:i:;ss;2M@B@BBBBMBMBMBMMMBBBBBMBMMG
99X9X9999999999G9GGGGGGGGMMBB@B@B@B@M,,,,:::,:,::::iiiiri;;;i;riir;rrsssrss2srssrrsrisrrrsssssrrrrrsrrr;iiii:::i:ii::::i;;S@B@B@BBMBB@MBMBM@MBM@B@@@BM
MGMGMGMMBMBMBB@B@B@B@B@B@B@B@B@B@B@Si,,,:,,,,,,,:::irrrrrrrrr;rii;rrsssssrssrsrrrssrssrrrrsssrssssrrrrririiiri;ii:::::::,r@B@B@B@BBBBB@@@BBB@B@@@B@B@B
B@B@B@B@B@B@B@B@B@B@B@B@B@B@@@MGGSi  ,,,,,,,,,,,,::rrsrrrrrri;iiirrs29995srrrs;rsssrssrrrrrrrrrsssssssrrrririiirr;:i:i:: r@@@@B@B@B@B@B@BBMBMBMMMMMMGG
@B@B@@@B@@@B@B@B@B@B@B@B@G2ri:,,:    ,,,,,,,,,,,:::iirrrsssr;irsss2XG9GGXsss2sss222srrsssr;irrrrsrrrrrrrrrrrrrrrrr;::::, s@B@B@B@MBMMMMMMGMGG9999XX5Hs
B@@@B@B@B@B@B@BMMBB@B@B@Ss:,        ,,,,,,,,,,,,:::iiii;rsrrrss22222ss2925S999S2S92srrsrr;rri;rsssrrirrsrrrsrrrrii:i::,,i@BBMMMMGMGG99999XSXHS5222ssss
@BMGGGBB@B@B@MM999GM@B@M2i:,   ,, ,,,,,,,,,,,,,,::::iirsss22ssrrrii:i;2sssssHX9X925ssirrr:iirrrssssrr;rrrrrrrrrrrii::,,:M@BMMGGGG99X9XS5S5H2522s2s2sss
BM9G9MMBB@B@B@BGX9SX5S2sri,,,,,,,,,, ,,,,,,,,,,,,::i;ss22H2s;irrrssS9SXHsssssH2S22sS2ss2sssss2sssrrsrr;r;rirrrrrrii:,,,5B@MG9G9999X9HX5S222222sssssssr
@BMGGGMM@B@B@BM92ssii::,,,,,,,,,, ,   ,,,,,,,,,,,::irrrirrr;sXBB@B@B@BBG9SG52s2SS2SSXXXSS52ssssssssssrrrsrrrssrrri:,,,,rSG9XXSS2H2222ssssssrrrr;ri;i;:
MMG99XX9XX2H22ssri:,,,,,,,,,           ,,,,,,,,,::::::::::,,rMB@B@9G@@BBSGMM2s2HHSs52Xsrrrrss2222SX2s222ssssrrrrr;:::,,,,:rsssrrrriri;iii:::::,:,:::,,
X5S22ssssrrrriiii::,::i:,,,   ,,,       ,,,,,,:::::,,,,,::,,:2MB@B@B@B@95MM92sSSXH2ss59ss2SGBB@BBB@@M999S2sssssrsri:i::,, ,::::::,:::,:,:,:,,,,,,,,,,,
22ssssssssrsrrrrrrrs22i,,,,,,,,,,,,,,,,,,,,,,,,,,,,, , ,,::::isMB@@@BM22B@MGXSGM995sr2B@B@9GB@B@B@BM9Ssss222ssri:i::,,,,,,,,,,,,,,,,,,,:,,,,,,,,,,,::,
9HXSSSXS9X9999GGMB@@X:, , ,,,,,,,,,,,,,,,,,,,,,,,,,,, , ,,,,::ir22SXSHB@@M9MMGM99S2rrsMBBMrr@B@B@B92srrssssrrri,:,,       ,,,,,,,,,,,,:,,,,,,,,,,,,,,,
BBB@B@B@B@@@B@B@B@Gs   , ,   , , ,,,,:,:,,,,,,,,,,,,,,,,,,,,,,,,:isS992srrii:iir::i;;sS9MMGGB@BG5srrirrri:::,,,,           ,,:,,,,,,,,,,,,,,,:,,,,,,,,
@B@B@@@B@B@B@B@B9:              , ,,,,::i::,,,,,,,,,,,,,,,,,,,,,,:sri, ,,,,,,:::i:,,:::rSMG55srii;r:ii:,,,,                 ,,,,,,,,,,,,,,,,,,,,,,,,,,
@@B@B@MBMMMMGM9r                   ,,,:i:iri,,,,,,,:::,:,,,,,,,,::,,,,,,,,,:::,,,,,,,i::,rGSsrii:::::,,,                   ,,,,,,,,,,,,,,,,,,,,,,,,:,,
G99SS5522s2ssi                      ,,::rrss:,, ,,::i:i,,,:,,:rsrir:,,:,is2SX5sssr:,,,:,,,r92i:,,:i,,                      ,,,:,,,:,:,,,:,,,,,,,,,,,,
srrrrrrrrrrr:      ,                 ,,;srs2sssr:,,::iii:i:::rri:i:, ,,:sM9X2s5H2GG2:,,,,,,r25ssss,                        ,,:,,,,,,,,,,,,,,,,,,,,,,,
i:i:ii;ii:i:                      , ,,,:sss2SS99Hr:,:iri;:::i:,,, ,    ,s9SBBs2s99XMr ,,,,;rs9X9s:,                        ,i,,,,,,,,,,,,,,,,,,,, ,,,
:::i:i:::::,                       ,,,,:is25HHS9992r:::i:iii,,,,    ,,  :MM@MG9GBM92,  ,,irsssS9i,     ,      ,,       ,  ,;::,,,:,,,, ,,,,,,,,,,, ,,,
:,:::,::::,                       ,,,,:::r2SSH99MM@MXsi:::i:i:, , ,     ,9@BMMMM@BS,,   ,,irirXM2,        :r:,,,:;:  ,issrsr:,,,,,, ,,,,,,,,, ,,,,,,,
:,,:,:,,,:,                      ,,,,,:r:rS99GM@@@B@M9sii:,,:i:,,  , , ,isXM@@MBM2,:,, ,,,,,:5M@BBHi,ri,,iX9r:::rMS22GSssr,      ,  ,,,,,,,,,,,,,,,,,,
:,:,,,:,,,,                     , , ,,iir2BB@BBMGsrrrrsssri:::iii::,::irsssrsssii:,,, ,,,:isGBM9229929S;2GMssir;;rri,,      ,,,  ,,,, ,,, ,,,,,,,,,,,
:,:,,,,:,:,                    ,  ,,,isSG@BM92sri::irssSSX25HHS9XSH9X22HSG9BG9XXXSssssrrrssr:,     ,                     ,,,,,,,,,,,,,       ,,,,,,,
,,,,:,,,,,:                 , ,  ,:i5GM9Hr:,,,,,,,,,::::::iisrss2s299XS9G9GGSS92ss2sr,,,,             ,    ,, ,  ,,  ,,,, ,    ,, ,,, ,,,   ,,,,,,  ,
:,,:,,,,,,:, ,,,       ,:, ,:;sssXss2s:        , ,     ,             ,,                  , , , ,,,,,,, , , ,,, ,,,,,   ,,,  ,, ,,,   ,,, , ,   ,,, ,,,
, ,,,,:,:,:irsX2srsssrr2S22ssss:ii,       , , , ,,, ,,, ,,    , ,                   , ,,, , , ,,,  ,,,   ,,  ,,,, , ,,,,,,,,, , ,,, ,,,   ,,, ,,,,,,,,
, ,:,,,,,,,,:i:i;r;r::,,,,,,         ,,,,,,,,,,, ,,,,,  ,,,,  ,, , ,,, ,, ,  , , , ,  ,, ,,,,,,, ,,,,,    ,, ,    ,,,,,,,, , ,,, ,,,,, ,,, ,,,,, ,:,,
, ,,,,,,,,,,                    , ,,,,,,,,, ,,, ,,,,, ,  ,,, ,,,, ,      ,, , ,,,, ,, , , ,,  ,    ,, , ,  ,,,, ,,,   ,,, ,,, , ,,,   ,,, ,,,,, ,,,,,,
, ,,,,,,,,,,,,,,,,,, , ,,, ,,,,,,, ,,,  ,, ,, ,, ,,,   ,,,,,  ,, ,   ,,,,, , ,,  ,     ,,    , ,,, ,,,,, ,,, ,,,,,   ,,, ,,,,,,,,, ,,,,,,,,,,, ,,,,,,,
, ,,,,,,,,,,, , ,,,,,,, ,,, ,,,,,,, ,   ,   ,,,,,,, ,,,,, ,   , ,  ,,   ,       ,   , ,,,,,   , ,   ,,,,,,, ,,,,    ,,  ,,  ,,,,,,, , ,,,,,,,, ,, ,,,
,  ,,,,,,,,, ,,,,,,,,, ,,, ,,,   ,,,,, ,,, , , , ,,  ,,,    ,, ,, ,,       , , ,,,,, ,,, ,,, ,         , , ,     , , ,  ,, ,,, ,,,,,  ,,,,,,,, ,, ,,,
, ,,,,,,, ,,,,, ,,, , ,,  ,,, , ,,,,, ,  ,,,,  ,,   , ,,, , ,       ,   , ,     , , , ,   , , , ,,, , , , , ,,, ,,, ,,, ,,,,  ,,,,,,,,,,, ,,,, ,, ,,,
, ,,,,,,,,,,,,,,,,,,,,,  ,,,,,,, ,,    ,,,   , ,,,,, ,  ,,,, , ,   ,,, ,   , , , ,   , ,,,   ,,,,, , ,,,    ,,,, , ,  ,,,, ,,,,,,,,,,,,, ,,,,,,,,,,,,,
: ,,,,,,,,,,,,,,,,,,, ,,,,,,,,,,,,,,,,,,,,, ,,,,,,,,,   ,,, ,,,,,,,,, ,,, ,,,,,,, , ,   ,,,,, , ,,, , ,,,,,,, ,,,,, ,,:,:,:,:::i:::i:::::::,::::::,,,,
, ,,          ,,   ,   ,                                                                                        , , , ,    ,, ,   , ,
*/
#include <bits/stdc++.h>
#include <ext/pb_ds/assoc_container.hpp>
#include <ext/pb_ds/detail/standard_policies.hpp>
using ll = int64_t;
using ld = long double;
using ull = uint64_t;
using namespace std;
using namespace __gnu_pbds;
typedef vector <int> vi;
typedef pair <int, int> ii;

const int INF = 1 << 30;

const int maxn = 55;
const int c = 28;

int n[2], d[maxn][maxn];
string s[2];
bool cv[2][maxn][maxn][c];
vector <string> vec[c];

int main() {
#ifdef BZ
    freopen("in.txt", "r", stdin); freopen("out.txt", "w", stdout);
#endif
    ios_base::sync_with_stdio(false); cin.tie(nullptr); cout.tie(nullptr); cout.setf(ios::fixed); cout.precision(6);

    for(int i = 0; i < 2; i++) {
        cin >> s[i];
        n[i] = s[i].size();
    }

    int q;
    cin >> q;

    while(q--) {
        string t;
        cin >> t;
        vec[t[0] - 'a'].push_back(t.substr(3));
    }

    for(int w = 0; w < 2; w++) {
        for(int r = 1; r <= n[w]; r++) {
            for(int l = r - 1; ~l; l--) {
                for(int c = 0; c < 26; c++) {
                    if(r - l == 1) {
                        cv[w][l][r][c] = s[w][l] - 'a' == c;
                    } else {
                        for(string t: vec[c]) {
                            for(int j = l; j + 1 < r; j++) {
                                cv[w][l][r][c] |= cv[w][l][j + 1][t[0] - 'a'] & cv[w][j + 1][r][t[1] - 'a'];
                            }
                        }
                    }
                }
            }
        }
    }

    memset(d, 63, sizeof d);
    d[0][0] = 0;

    for(int a = 1; a <= n[0]; a++) {
        for(int b = 1; b <= n[1]; b++) {
            for(int i = 0; i < a; i++) {
                for(int j = 0; j < b; j++) {
                    for(int c = 0; c < 26; c++) {
                        if(cv[0][i][a][c] && cv[1][j][b][c])
                            d[a][b] = min(d[a][b], d[i][j] + 1);
                    }
                }
            }
        }
    }

    if(d[n[0]][n[1]] > 1e8)
        cout << "-1\n";
    else
        cout << d[n[0]][n[1]] << "\n";

}